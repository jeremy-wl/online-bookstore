<!DOCTYPE html>
<html>
<head>

  <title>Jeremy's Online Bookstore</title>

  <%= stylesheet_link_tag    "application", media: "all",
    "data-turbolinks-track" => true %>
  <%= javascript_include_tag "application", "data-turbolinks-track" => true %>
  <%= csrf_meta_tags %>

</head>

<body class="<%= controller.controller_name %>">

<p class="notice"><%= notice %></p>
<p class="alert"><%= alert %></p>

<header>
  <%= render "layouts/header" %>
</header>
  <div id="columns">
    <div id="side">
      <ul>
        <li><%= link_to t(".home"), store_path %></li>
        <li><a href="http://www..../faq"><%= t(".questions") %></a></li>
        <li><a href="http://www..../news"><%= t(".news") %></a></li>
        <li><a href="http://www..../contact"><%= t(".contact") %></a></li>
      </ul>
        
        <% if user_signed_in? %>
          <ul>
            <% if current_user.try(:admin?) %>
              <li><%= link_to "All Orders", orders_path %></li>
            <% elsif user_signed_in? %>
              <li><%= link_to "My Orders", orders_path %></li>
            <% end %>

            <% if current_user.try(:admin?) %>
              <li><%= link_to "Products", products_path %></li>
            <% end %>
            
            <% if current_user.try(:admin?) %>
              <li><%= link_to "All Users", users_path %></li>
            <% end %>
          </ul>
        <% end %>

<!-- @cart is apparently nil when we display an index of our products. Thatmakes sense, because it is set only in the store controller.  All we need to do is avoid displaying the cart at all unless this value is set. -->

    <% if @cart %> 
      <%= hidden_div_if(@cart.line_items.empty?, id: 'cart') do %>
        <%= render @cart %>
      <% end %>
    <% end %>

    </div>

    <div id="main">
      <%= yield %>
    </div>
  </div>
</body>
</html>